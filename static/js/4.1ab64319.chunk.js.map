{"version":3,"sources":["../node_modules/reactstrap/es/Card.js","../node_modules/reactstrap/es/CardHeader.js","../node_modules/reactstrap/es/CardBody.js","loggedin/now/CardTemplate.js","loggedin/now/NextLessonCard.js","loggedin/now/LunchMenuCard.js","loggedin/now/CountdownCard.js","loggedin/now/Now.js"],"names":["propTypes","tag","inverse","bool","color","string","body","outline","className","cssModule","object","innerRef","oneOfType","func","props","Tag","attributes","classes","createElement","ref","defaultProps","CardTemplate","this","header","content","Component","NextLessonCard","state","now","i","undefined","endTime","Date","event_end","next_course","class","addZero","getHours","getMinutes","next_room","LunchMenuCard","food","getLunchData","bind","axios","get","process","headers","Authorization","localStorage","getItem","then","res","result","data","success","setState","lunch","map","value","index","key","kasvis","special","Object","entries","CountdownCard","currentTime","Math","round","secondsLeft","to","endDate","toISOString","substr","countdownTo","title","textTime","interval","setInterval","clearInterval","Now","loadingState","exam_week","period","getUserData","timer","n","console","log","intervalId","course","room","Row","Col","xs","sm","md","type"],"mappings":"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","file":"static/js/4.1ab64319.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  inverse: PropTypes.bool,\n  color: PropTypes.string,\n  body: PropTypes.bool,\n  outline: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func])\n};\nvar defaultProps = {\n  tag: 'div'\n};\n\nvar Card = function Card(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      color = props.color,\n      body = props.body,\n      inverse = props.inverse,\n      outline = props.outline,\n      Tag = props.tag,\n      innerRef = props.innerRef,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"color\", \"body\", \"inverse\", \"outline\", \"tag\", \"innerRef\"]);\n\n  var classes = mapToCssModules(classNames(className, 'card', inverse ? 'text-white' : false, body ? 'card-body' : false, color ? (outline ? 'border' : 'bg') + \"-\" + color : false), cssModule);\n  return React.createElement(Tag, _extends({}, attributes, {\n    className: classes,\n    ref: innerRef\n  }));\n};\n\nCard.propTypes = propTypes;\nCard.defaultProps = defaultProps;\nexport default Card;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  className: PropTypes.string,\n  cssModule: PropTypes.object\n};\nvar defaultProps = {\n  tag: 'div'\n};\n\nvar CardHeader = function CardHeader(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      Tag = props.tag,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"tag\"]);\n\n  var classes = mapToCssModules(classNames(className, 'card-header'), cssModule);\n  return React.createElement(Tag, _extends({}, attributes, {\n    className: classes\n  }));\n};\n\nCardHeader.propTypes = propTypes;\nCardHeader.defaultProps = defaultProps;\nexport default CardHeader;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.string, PropTypes.func])\n};\nvar defaultProps = {\n  tag: 'div'\n};\n\nvar CardBody = function CardBody(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      innerRef = props.innerRef,\n      Tag = props.tag,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"innerRef\", \"tag\"]);\n\n  var classes = mapToCssModules(classNames(className, 'card-body'), cssModule);\n  return React.createElement(Tag, _extends({}, attributes, {\n    className: classes,\n    ref: innerRef\n  }));\n};\n\nCardBody.propTypes = propTypes;\nCardBody.defaultProps = defaultProps;\nexport default CardBody;","import React, { Component } from 'react';\r\nimport { Card, CardBody, CardHeader, Pagination, PaginationItem, PaginationLink, Row, Col } from 'reactstrap';\r\n\r\nclass CardTemplate extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n  }\r\n\r\n  render(){\r\n            return (\r\n              <Card>\r\n                <CardHeader>\r\n                  <strong>{this.props.header}:</strong>\r\n                </CardHeader>\r\n                <CardBody>\r\n                  {this.props.content}\r\n                </CardBody>\r\n              </Card>)\r\n  }\r\n}\r\n\r\nexport default CardTemplate;\r\n","import React, { Component } from 'react';\r\nimport { Card, CardBody, CardHeader, Pagination, PaginationItem, PaginationLink, Row, Col } from 'reactstrap';\r\nimport CardTemplate from './CardTemplate'\r\n\r\n\r\nclass NextLessonCard extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n\r\n    this.state = {\r\n      now: this.props.now\r\n    }\r\n  }\r\n\r\n  addZero(i) {\r\n    if (i < 10) {\r\n      i = \"0\" + i;\r\n    }\r\n    return i;\r\n  }\r\n\r\n  render(){\r\n    if(this.state.now != undefined){\r\n      var endTime = new Date(this.state.now.event_end *1000);\r\n\r\n      return (<CardTemplate header=\"Seuraava tunti\" content={\r\n        <>\r\n        <h3>{this.state.now.next_course}</h3>\r\n        <h4 className=\"mt-3\">\r\n          <i class=\"fa fa-clock-o fa-lg m-3\"></i>\r\n          {this.addZero(endTime.getHours()) + \":\" + this.addZero(endTime.getMinutes())}\r\n        </h4>\r\n        <h4 className=\"mt-1\">\r\n          <i class=\"cui-location-pin icons font-2xl m-3 \"></i>\r\n          {this.state.now.next_room}\r\n        </h4>\r\n        </>\r\n      }/>)\r\n    }else{\r\n      return null\r\n    }\r\n  }\r\n}\r\n\r\nexport default NextLessonCard;\r\n","import React, { Component } from 'react';\r\nimport { Card, CardBody, CardHeader, Pagination, PaginationItem, PaginationLink, Row, Col } from 'reactstrap';\r\nimport CardTemplate from './CardTemplate'\r\nimport axios from 'axios';\r\n\r\nclass LunchMenuCard extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n\r\n    this.state = {\r\n      food: {}\r\n    }\r\n\r\n    this.getLunchData = this.getLunchData.bind(this)\r\n\r\n    this.getLunchData();\r\n  }\r\n\r\n\r\n  getLunchData(){\r\n    axios.get(process.env.REACT_APP_API_URL + '/food', { headers: { Authorization: `Bearer ${localStorage.getItem(\"access_token\")}` } })\r\n          .then(res => {\r\n            const result = res.data;\r\n            if(result.success){\r\n              this.setState({food: result.data})\r\n            }\r\n    })\r\n  }\r\n\r\n\r\n  render(){\r\n    if(this.state.food != undefined){\r\n\r\n      return (<CardTemplate header=\"Ruokana tänään\" content={\r\n        <>\r\n          {this.state.food.lunch &&\r\n            <>\r\n              <h5>Lounas</h5>\r\n              <ul>\r\n              {this.state.food.lunch.map((value, index) => {\r\n                return <li key={index}>{value}</li>\r\n              })}\r\n              </ul>\r\n            </>\r\n          }\r\n          {this.state.food.kasvis &&\r\n            <>\r\n              <h5>Kasvislounas</h5>\r\n              <ul>\r\n              {this.state.food.kasvis.map((value, index) => {\r\n                return <li key={index}>{value}</li>\r\n              })}\r\n              </ul>\r\n            </>\r\n          }\r\n          {this.state.food.special &&\r\n            <>\r\n\r\n              {Object.entries(this.state.food.special).map((value, index) => {\r\n                return (\r\n                  <>\r\n                    <h5>{value[0]}</h5>\r\n                    <ul>\r\n                    {value[1].map((value, index) => {\r\n                      return <li key={index}>{value}</li>\r\n                    })}\r\n                    </ul>\r\n                  </>\r\n                )\r\n              })\r\n            }\r\n\r\n            </>\r\n          }\r\n        </>\r\n      }/>)\r\n    }else{\r\n      return null\r\n    }\r\n  }\r\n}\r\n\r\nexport default LunchMenuCard;\r\n","import React, { Component } from 'react';\r\nimport { Card, CardBody, CardHeader, Pagination, PaginationItem, PaginationLink, Row, Col } from 'reactstrap';\r\nimport CardTemplate from './CardTemplate'\r\n\r\n\r\nclass CountdownCard extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n\r\n    var currentTime = Math.round(Date.now() / 1000);\r\n    var secondsLeft = this.props.to - currentTime;\r\n\r\n    var endDate = new Date(this.props.to * 1000);\r\n\r\n    var content = new Date(secondsLeft * 1000).toISOString().substr(11, 8);\r\n\r\n    this.state = {\r\n      countdownTo: this.props.to,\r\n      title: this.props.title,\r\n      content: content,\r\n      textTime: endDate.getHours() + \":\" + endDate.getMinutes()\r\n    }\r\n\r\n\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n        this.interval = setInterval(() => {\r\n            var currentTime = Math.round(Date.now() / 1000);\r\n            var secondsLeft = this.state.countdownTo - currentTime;\r\n            if(secondsLeft >= 0){\r\n              var content = new Date(secondsLeft * 1000).toISOString().substr(11, 8);\r\n\r\n\r\n              this.setState({content: content});\r\n            }\r\n        }, 1000);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.interval) {\r\n            clearInterval(this.interval);\r\n        }\r\n    }\r\n\r\n  render(){\r\n    if(this.state.countdownTo != undefined){\r\n      return (<CardTemplate header={this.props.title} content={\r\n        <>\r\n        <h2 className=\"text-center\" > {this.state.content}</h2>\r\n        </>\r\n      }/>)\r\n    }else{\r\n      return null\r\n    }\r\n  }\r\n}\r\n\r\nexport default CountdownCard;\r\n","import React, { Component } from 'react';\r\nimport { Card, CardBody, CardHeader, Pagination, PaginationItem, PaginationLink, Row, Col } from 'reactstrap';\r\nimport axios from 'axios';\r\n\r\nimport NextLessonCard from \"./NextLessonCard\"\r\nimport LunchMenuCard from \"./LunchMenuCard\"\r\nimport CountdownCard from \"./CountdownCard\"\r\n\r\nclass Now extends Component {\r\n\r\n  constructor(props){\r\n    super(props)\r\n\r\n    this.state = {\r\n      loadingState: \"loading\",\r\n      now: undefined,\r\n      exam_week: false,\r\n      period: 0,\r\n      event_end: 9999999999999999999999999999999\r\n\r\n    }\r\n    this.getUserData = this.getUserData.bind(this);\r\n    this.timer = this.timer.bind(this);\r\n  }\r\n\r\n\r\n  timer(){\r\n      var n = Date.now() / 1000;\r\n\r\n      if(n > this.state.event_end){\r\n        console.log(\"JEE\")\r\n        this.getUserData()\r\n      }else{\r\n        console.log(\"n\" + n)\r\n        console.log(\"d\" + this.state.event_end)\r\n      }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n     clearInterval(this.state.intervalId);\r\n  }\r\n\r\n  getUserData(){\r\n    axios.get(process.env.REACT_APP_API_URL + '/now', { headers: { Authorization: `Bearer ${localStorage.getItem(\"access_token\")}` } })\r\n          .then(res => {\r\n            const result = res.data;\r\n            if(result.success){\r\n              this.setState({loadingState: \"ready\", exam_week: result.exam_week})\r\n              if(result.exam_week){\r\n\r\n              }else{\r\n                this.setState({now: result.now, period: result.period, event_end: result.now.event_end})\r\n                var intervalId = setInterval(this.timer, 1000);\r\n                this.setState({intervalId: intervalId});\r\n              }\r\n            }\r\n    })\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.getUserData();\r\n  }\r\n\r\n  render() {\r\n    if(this.state.now != undefined){\r\n      if(this.state.now.state == \"lesson\"){\r\n        return (\r\n          <div className=\"animated fadeIn\">\r\n            <h2 className=\"m-4\"><strong>{this.state.now.course}</strong> -tunti @ {this.state.now.room}</h2>\r\n            <Row>\r\n              <Col xs=\"12\" sm=\"6\" md=\"7\">\r\n                <CountdownCard title=\"Tunti loppuu\" to={this.state.now.event_end}/>\r\n              </Col>\r\n              <Col xs=\"12\" sm=\"6\" md=\"5\">\r\n                {(this.state.now.type == \"beforelunch\" || this.state.now.type == \"beforesplit\") &&\r\n                  <LunchMenuCard />\r\n                }\r\n              </Col>\r\n            </Row>\r\n          </div>\r\n        );\r\n      }else if(this.state.now.state == \"break\"){\r\n        return (<div className=\"animated fadeIn\">\r\n          <h2 className=\"m-4\">Välitunti</h2>\r\n          <Row>\r\n          <Col xs=\"12\" sm=\"12\" md=\"6\">\r\n            <NextLessonCard now={this.state.now}/>\r\n          </Col>\r\n            <Col xs=\"12\" sm=\"12\" md=\"6\">\r\n              <CountdownCard title=\"Tunti alkaa\" to={this.state.now.event_end}/>\r\n            </Col>\r\n\r\n\r\n          </Row>\r\n        </div>)\r\n      }else if(this.state.now.state == \"morning\"){\r\n\r\n        return (<div className=\"animated fadeIn\">\r\n          <h2 className=\"m-4\">Hyvää huomenta!</h2>\r\n          <Row>\r\n            <Col xs=\"12\" sm=\"6\" md=\"6\">\r\n              <NextLessonCard />\r\n            </Col>\r\n          </Row>\r\n        </div>)\r\n      }else{\r\n        return (<div className=\"animated fadeIn\">\r\n          <h2 className=\"m-4\">Joku muu aika</h2>\r\n          <Row>\r\n            <Col xs=\"12\" sm=\"6\" md=\"6\">\r\n\r\n            </Col>\r\n          </Row>\r\n        </div>)\r\n      }\r\n\r\n    }else{\r\n      return (<div className=\"animated fadeIn pt-1 text-center\">Ladataan...</div>);\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport default Now;\r\n"],"sourceRoot":""}