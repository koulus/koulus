(window["webpackJsonplukiokalenteri-ui"]=window["webpackJsonplukiokalenteri-ui"]||[]).push([[4],{95:function(e,t,a){"use strict";a.r(t);var n=a(13),s=a(14),r=a(17),l=a(15),o=a(6),c=a(16),i=a(0),u=a.n(i),m=a(91),d=a(92),h=a(24),f=a.n(h),v=a(4),b=a(5),p=a(1),E=a.n(p),g=a(2),w=a.n(g),j=a(3),k={tag:j.d,inverse:E.a.bool,color:E.a.string,body:E.a.bool,outline:E.a.bool,className:E.a.string,cssModule:E.a.object,innerRef:E.a.oneOfType([E.a.object,E.a.string,E.a.func])},O=function(e){var t=e.className,a=e.cssModule,n=e.color,s=e.body,r=e.inverse,l=e.outline,o=e.tag,c=e.innerRef,i=Object(b.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),m=Object(j.b)(w()(t,"card",!!r&&"text-white",!!s&&"card-body",!!n&&(l?"border":"bg")+"-"+n),a);return u.a.createElement(o,Object(v.a)({},i,{className:m,ref:c}))};O.propTypes=k,O.defaultProps={tag:"div"};var y=O,N={tag:j.d,className:E.a.string,cssModule:E.a.object},D=function(e){var t=e.className,a=e.cssModule,n=e.tag,s=Object(b.a)(e,["className","cssModule","tag"]),r=Object(j.b)(w()(t,"card-header"),a);return u.a.createElement(n,Object(v.a)({},s,{className:r}))};D.propTypes=N,D.defaultProps={tag:"div"};var x=D,_={tag:j.d,className:E.a.string,cssModule:E.a.object,innerRef:E.a.oneOfType([E.a.object,E.a.string,E.a.func])},I=function(e){var t=e.className,a=e.cssModule,n=e.innerRef,s=e.tag,r=Object(b.a)(e,["className","cssModule","innerRef","tag"]),l=Object(j.b)(w()(t,"card-body"),a);return u.a.createElement(s,Object(v.a)({},r,{className:l,ref:n}))};I.propTypes=_,I.defaultProps={tag:"div"};var M=I,S=function(e){function t(e){return Object(n.a)(this,t),Object(r.a)(this,Object(l.a)(t).call(this,e))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return u.a.createElement(y,null,u.a.createElement(x,null,u.a.createElement("strong",null,this.props.header,":")),u.a.createElement(M,null,this.props.content))}}]),t}(i.Component),T=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).state={now:a.props.now},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"addZero",value:function(e){return e<10&&(e="0"+e),e}},{key:"render",value:function(){if(void 0!=this.state.now){var e=new Date(1e3*this.state.now.event_end);return u.a.createElement(S,{header:"Seuraava tunti",content:u.a.createElement(u.a.Fragment,null,u.a.createElement("h3",null,this.state.now.next_course),u.a.createElement("h4",{className:"mt-3"},u.a.createElement("i",{class:"fa fa-clock-o fa-lg m-3"}),this.addZero(e.getHours())+":"+this.addZero(e.getMinutes())),u.a.createElement("h4",{className:"mt-1"},u.a.createElement("i",{class:"cui-location-pin icons font-2xl m-3 "}),this.state.now.next_room))})}return null}}]),t}(i.Component),F=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).state={food:{}},a.getLunchData=a.getLunchData.bind(Object(o.a)(a)),a.getLunchData(),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"getLunchData",value:function(){var e=this;f.a.get("https://vilkkuv.fi/koulu/api/food",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then(function(t){var a=t.data;a.success&&e.setState({food:a.data})})}},{key:"render",value:function(){return void 0!=this.state.food?u.a.createElement(S,{header:"Ruokana t\xe4n\xe4\xe4n",content:u.a.createElement(u.a.Fragment,null,this.state.food.lunch&&u.a.createElement(u.a.Fragment,null,u.a.createElement("h5",null,"Lounas"),u.a.createElement("ul",null,this.state.food.lunch.map(function(e,t){return u.a.createElement("li",{key:t},e)}))),this.state.food.kasvis&&u.a.createElement(u.a.Fragment,null,u.a.createElement("h5",null,"Kasvislounas"),u.a.createElement("ul",null,this.state.food.kasvis.map(function(e,t){return u.a.createElement("li",{key:t},e)}))),this.state.food.special&&u.a.createElement(u.a.Fragment,null,Object.entries(this.state.food.special).map(function(e,t){return u.a.createElement(u.a.Fragment,null,u.a.createElement("h5",null,e[0]),u.a.createElement("ul",null,e[1].map(function(e,t){return u.a.createElement("li",{key:t},e)})))})))}):null}}]),t}(i.Component),R=function(e){function t(e){var a;Object(n.a)(this,t),a=Object(r.a)(this,Object(l.a)(t).call(this,e));var s=Math.round(Date.now()/1e3),o=a.props.to-s,c=new Date(1e3*a.props.to),i=new Date(1e3*o).toISOString().substr(11,8);return a.state={countdownTo:a.props.to,title:a.props.title,content:i,textTime:c.getHours()+":"+c.getMinutes()},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval(function(){var t=Math.round(Date.now()/1e3),a=e.state.countdownTo-t;if(a>=0){var n=new Date(1e3*a).toISOString().substr(11,8);e.setState({content:n})}},1e3)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){return void 0!=this.state.countdownTo?u.a.createElement(S,{header:this.props.title,content:u.a.createElement(u.a.Fragment,null,u.a.createElement("h2",{className:"text-center"}," ",this.state.content))}):null}}]),t}(i.Component),U=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).state={loadingState:"loading",now:void 0,exam_week:!1,period:0,event_end:1e31},a.getUserData=a.getUserData.bind(Object(o.a)(a)),a.timer=a.timer.bind(Object(o.a)(a)),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"timer",value:function(){var e=Date.now()/1e3;e>this.state.event_end?(console.log("JEE"),this.getUserData()):(console.log("n"+e),console.log("d"+this.state.event_end))}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId)}},{key:"getUserData",value:function(){var e=this;f.a.get("https://vilkkuv.fi/koulu/api/now",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).then(function(t){var a=t.data;if(a.success)if(e.setState({loadingState:"ready",exam_week:a.exam_week}),a.exam_week);else{e.setState({now:a.now,period:a.period,event_end:a.now.event_end});var n=setInterval(e.timer,1e3);e.setState({intervalId:n})}})}},{key:"componentDidMount",value:function(){this.getUserData()}},{key:"render",value:function(){return void 0!=this.state.now?"lesson"==this.state.now.state?u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement("h2",{className:"m-4"},u.a.createElement("strong",null,this.state.now.course)," -tunti @ ",this.state.now.room),u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12",sm:"6",md:"7"},u.a.createElement(R,{title:"Tunti loppuu",to:this.state.now.event_end})),u.a.createElement(d.a,{xs:"12",sm:"6",md:"5"},("beforelunch"==this.state.now.type||"beforesplit"==this.state.now.type)&&u.a.createElement(F,null)))):"break"==this.state.now.state?u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement("h2",{className:"m-4"},"V\xe4litunti"),u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12",sm:"12",md:"6"},u.a.createElement(T,{now:this.state.now})),u.a.createElement(d.a,{xs:"12",sm:"12",md:"6"},u.a.createElement(R,{title:"Tunti alkaa",to:this.state.now.event_end})))):"morning"==this.state.now.state?u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement("h2",{className:"m-4"},"Hyv\xe4\xe4 huomenta!"),u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12",sm:"6",md:"6"},u.a.createElement(T,null)))):u.a.createElement("div",{className:"animated fadeIn"},u.a.createElement("h2",{className:"m-4"},"Joku muu aika"),u.a.createElement(m.a,null,u.a.createElement(d.a,{xs:"12",sm:"6",md:"6"}))):u.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Ladataan...")}}]),t}(i.Component);t.default=U}}]);
//# sourceMappingURL=4.1ab64319.chunk.js.map